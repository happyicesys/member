import{l as i,k as b,q as w,r as _,X as y,c as v,w as h,o as D,a as k,b as o,d as s,t as n,Y as u}from"./app-C2anKISp.js";import{A as Y}from"./AuthenticatedLayout-Bn9YpFBZ.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{q as P}from"./format-_WrfyJOJ.js";/* empty css                                                                        */import"./ResponsiveNavLink-BKXP-ECy.js";const S={class:"py-10 bg-gray-50"},A={class:"mx-auto max-w-3xl px-6"},I={class:"p-6 bg-white rounded-lg shadow-lg border-2 border-gray-200 text-center"},M={class:"text-gray-700 text-lg"},U={class:"font-bold text-red-500"},q={class:"font-bold text-blue-500"},B={class:"mt-2 text-sm text-gray-500"},F={class:"font-semibold"},N={class:"mt-6 flex flex-col items-center"},V={class:"flex space-x-4"},W=["disabled"],j={__name:"Retention",props:{selectedPlan:Object,currentPlanItemUser:Object},setup(m){const d=m,p=i(()=>{var e,t;return((t=(e=d.currentPlanItemUser)==null?void 0:e.data)==null?void 0:t.plan)||{}}),l=i(()=>{var e;return((e=d.selectedPlan)==null?void 0:e.data)||{}}),g=i(()=>{var t,r;const e=(r=(t=d.currentPlanItemUser)==null?void 0:t.data)==null?void 0:r.datetime_to;return e?P(new Date(e),"MMMM dd, yyyy"):"Unknown"}),c=b({plan_id:l.value.id||""});w(l,e=>{c.plan_id=(e==null?void 0:e.id)||""});const a=_(!1),f=()=>{window.confirm("Are you sure you want to downgrade? This will take effect after the current billing cycle.")&&(a.value=!0,c.post("/plan/downgrade",{preserveScroll:!0,onSuccess:()=>{alert("Your downgrade request has been scheduled."),u.visit("/dashboard")},onError:e=>{console.error(e),alert("Failed to process downgrade. Please try again.")},onFinish:()=>{a.value=!1}}))},x=()=>{u.visit("/plan")};return(e,t)=>{const r=y("Head");return D(),v(Y,null,{default:h(()=>[k(r,{title:"Confirm Downgrade"}),o("div",S,[o("div",A,[t[6]||(t[6]=o("h2",{class:"text-3xl font-bold text-red-500 mb-6 text-center"}," Are You Sure You Want to Downgrade? ",-1)),o("div",I,[o("p",M,[t[0]||(t[0]=s(" You're about to switch from ")),o("span",U,n(p.value.name||"Your Current Plan"),1),t[1]||(t[1]=s(" to ")),o("span",q,n(l.value.name||"Selected Plan"),1),t[2]||(t[2]=s(". "))]),t[5]||(t[5]=o("p",{class:"mt-4 text-sm text-gray-600"}," Downgrading may remove some premium features. Would you like to continue? ",-1)),o("p",B,[t[3]||(t[3]=s(" Your current plan will remain active until ")),o("span",F,n(g.value),1),t[4]||(t[4]=s(". "))]),o("div",N,[o("div",V,[o("button",{onClick:f,disabled:a.value,class:"bg-red-500 text-white font-bold py-2 px-6 rounded-lg shadow-md hover:bg-red-600 transition duration-200 disabled:opacity-50"},n(a.value?"Processing...":"Yes, Downgrade"),9,W),o("button",{onClick:x,class:"bg-gray-400 text-white font-bold py-2 px-6 rounded-lg shadow-md hover:bg-gray-500 transition duration-200"}," Cancel ")])])])])])]),_:1})}}},X=C(j,[["__scopeId","data-v-dc1177fb"]]);export{X as default};
