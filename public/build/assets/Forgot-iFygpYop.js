import{T,r as c,f as F,c as _,w as h,o as n,a,u as t,Z as $,b as o,g as q,v as M,n as g,h as i,i as V,t as x,F as S,j as v,e as N,d as C,k as R}from"./app-D1J9Lczl.js";/* empty css                                                                        */import{G as U}from"./GuestLayout-MM3geUzz.js";import{_ as y,b,a as P}from"./TextInput-CJgXn3j-.js";import{P as L}from"./PrimaryButton-B_aqzlFe.js";import"./ResponsiveNavLink-DRF11LO8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D=["disabled"],G=["value"],z={key:0},A={class:"mt-6"},Y={class:"mt-6"},Z={class:"mt-2 grid grid-cols-6 gap-2"},H={class:"mt-6 flex items-center justify-end"},J={key:1,class:"flex justify-end mt-2 text-sm text-blue-500"},K={class:"mt-2 flex items-center justify-center"},Q={class:"flex flex-col md:flex-row w-full md:w-fit justify-self-center mt-2 gap-8 md:w-2/5 text-center"},W=["disabled"],X={class:"mt-6 flex items-center justify-end"},ne={__name:"Forgot",props:{countryOptions:Object},setup(E){const O=E,e=T({country_id:"",phone_number:"",otp:"",passwordParts:["","","","","",""]}),p=c(!1),f=c(60),u=c(!1),d=c(!0),w=c([]);F(()=>{w.value=O.countryOptions.data,e.country_id=w.value.filter(l=>l.is_default)[0].id});const B=()=>{e.post(route("forget.verification"),{preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:()=>{p.value=!0,u.value=!0,d.value=!1,f.value=60;const l=setInterval(()=>{f.value>0?f.value--:(clearInterval(l),u.value=!1)},1e3)}})},j=l=>{if(e.passwordParts[l].length===1&&l<e.passwordParts.length-1){const s=document.getElementById(`password_${l+1}`);s&&s.focus()}else if(e.passwordParts[l].length===0&&l>0){const s=document.getElementById(`password_${l-1}`);s&&s.focus()}},k=()=>{e.post(route("reset.pin"),{onFinish:()=>e.reset("passwordParts","otp")})};return(l,s)=>(n(),_(U,null,{default:h(()=>[a(t($),{title:"Reset PIN"}),s[7]||(s[7]=o("section",{class:"text-white rounded my-2 md:w-4/6 mx-auto py-5"},[o("img",{src:"/images/icon.png",alt:"Vion Icon",class:"w-1/3 lg:w-1/6 rounded mx-auto"})],-1)),s[8]||(s[8]=o("div",{class:"text-center mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-800"},"Reset Your PIN"),o("p",{class:"mt-2 text-gray-600"},"Enter your phone number to receive a one-time password (OTP) to reset your PIN.")],-1)),o("form",{onSubmit:N(k,["prevent"]),class:"space-y-4 lg:w-3/12 mx-auto mb-10 px-2"},[o("div",null,[a(y,{for:"country_id",value:"Country Code"}),q(o("select",{id:"country_id",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"bg-gray-100":!d.value,"cursor-not-allowed":!d.value}]),disabled:!d.value,"onUpdate:modelValue":s[0]||(s[0]=r=>t(e).country_id=r),required:""},[s[3]||(s[3]=o("option",{value:"",disabled:""},"Select Country",-1)),(n(!0),i(S,null,V(w.value,r=>(n(),i("option",{key:r.id,value:r.id},x(r.phone_code)+" ("+x(r.name)+") ",9,G))),128))],10,D),[[M,t(e).country_id]]),a(b,{class:"mt-2",message:t(e).errors.country_id},null,8,["message"])]),o("div",null,[a(y,{for:"phone_number",value:"Phone Number"}),a(P,{id:"phone_number",type:"text",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"bg-gray-100":!d.value,"cursor-not-allowed":!d.value}]),modelValue:t(e).phone_number,"onUpdate:modelValue":s[1]||(s[1]=r=>t(e).phone_number=r),disabled:!d.value,required:"",placeholder:"Enter your phone number"},null,8,["class","modelValue","disabled"]),a(b,{class:"mt-2",message:t(e).errors.phone_number},null,8,["message"])]),p.value?(n(),i("div",z,[s[4]||(s[4]=o("hr",{class:"mt-6"},null,-1)),o("div",A,[a(y,{for:"otp",value:"OTP"}),a(P,{id:"otp",type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",modelValue:t(e).otp,"onUpdate:modelValue":s[2]||(s[2]=r=>t(e).otp=r),required:"",placeholder:"Enter the OTP from SMS"},null,8,["modelValue"]),a(b,{class:"mt-2",message:t(e).errors.otp},null,8,["message"])]),o("div",Y,[a(y,{for:"password",value:"New 6-digit PIN"}),o("div",Z,[(n(!0),i(S,null,V(t(e).passwordParts,(r,m)=>(n(),_(P,{key:m,id:"password_"+m,class:"block w-14 text-center px-2 py-3 border rounded-md focus:ring focus:ring-indigo-500 focus:ring-opacity-50",maxlength:"1",modelValue:t(e).passwordParts[m],"onUpdate:modelValue":I=>t(e).passwordParts[m]=I,onInput:I=>j(m),inputmode:"numeric",type:"text",pattern:"[0-9]*",required:"",ref_for:!0,ref:"passwordInputs"},null,8,["id","modelValue","onUpdate:modelValue","onInput"]))),128))]),a(b,{class:"mt-2",message:t(e).errors.passwordParts},null,8,["message"])])])):v("",!0),o("div",H,[p.value?v("",!0):(n(),_(L,{key:0,onClick:N(B,["prevent"]),class:g(["ms-2",{"opacity-25":!t(e).country_id||!t(e).phone_number||u.value,"cursor-not-allowed":!t(e).country_id||!t(e).phone_number||u.value}]),disabled:!t(e).country_id||!t(e).phone_number||u.value},{default:h(()=>s[5]||(s[5]=[C(" Send OTP ")])),_:1},8,["class","disabled"]))]),u.value?(n(),i("div",J," Resend SMS in "+x(f.value)+" seconds... ",1)):v("",!0),o("div",K,[o("div",Q,[p.value?(n(),i("button",{key:0,onClick:k,type:"submit",class:g(["bg-yellow-300 py-2 px-8 rounded-lg shadow-md border-2 border-red-600 text-red-600 font-extrabold text-xl hover:bg-yellow-400",{"opacity-25":!t(e).otp||t(e).passwordParts.some(r=>r===""),"cursor-not-allowed":!t(e).otp||t(e).passwordParts.some(r=>r==="")}]),disabled:!t(e).otp||t(e).passwordParts.some(r=>r==="")}," RESET PIN ",10,W)):v("",!0)])]),o("div",X,[a(t(R),{href:l.route("login"),class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:h(()=>s[6]||(s[6]=[C(" Back to Login ")])),_:1},8,["href"])])],32)]),_:1}))}};export{ne as default};
