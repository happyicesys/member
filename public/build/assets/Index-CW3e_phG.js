import{r as f,T as A,f as I,l as _,V,h as r,a as w,w as P,F as k,o as d,b as e,j as N,n as M,u as U,t as o,d as v,k as p,W as C}from"./app-6Z5aGBY8.js";import{A as Y}from"./AuthenticatedLayout-DGFBMzBc.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                        */import"./ResponsiveNavLink-xgxqU0Kz.js";const F={class:"py-10 bg-gray-50"},H={class:"mx-auto max-w-3xl px-6"},L={class:"space-y-4"},E=["onClick"],O={class:"flex justify-between items-center w-full"},T={class:"flex flex-col space-y-3 pr-4"},q={class:"text-xl font-bold text-gray-800"},z={class:"text-gray-600 whitespace-pre-line"},W={class:"mt-2 text-red-400 font-semibold"},G={key:0,class:"text-gray-800 text-right text-sm font-medium"},J={key:1,class:"text-gray-800 text-right text-sm font-medium"},K={key:0,class:"ml-auto inline-flex rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/40 w-fit h-fit"},Q={key:0,class:"mt-10 h-1 w-full bg-gray-300"},R={key:1,class:"p-6 m-6 md:m-12 bg-blue-50 shadow-lg rounded-lg border border-blue-400"},X={class:"flex items-center gap-4"},Z=["src"],ee={class:"text-blue-800 text-base font-medium"},te={class:"font-semibold"},le={class:"text-gray-700 text-sm"},ae={class:"mt-6 text-center"},se=["disabled"],ne={__name:"Index",props:{allPaymentMethods:Object,plans:[Array,Object],planItemUser:Object,needsPaymentMethod:Boolean,userHasAnyPaymentMethod:Boolean,userPaymentMethods:Array},setup(S){const i=S,x=f([]),m=f([]),a=f([]),b=f(!1),s=A({plan_id:""});I(()=>{x.value=i.allPaymentMethods.data,a.value=i.planItemUser.data,s.plan_id=a.value.plan_id,m.value=i.plans.data.filter(l=>l.is_available||l.id==a.value.plan_id)});const h=_(()=>m.value.find(l=>l.id===s.plan_id)),c=_(()=>m.value.find(l=>l.id===a.value.plan_id)),g=_(()=>b.value?"Processing...":c.value?s.plan_id===c.value.id?"Subscribed":h.value.level>c.value.level?"Upgrade Plan":h.value.level<c.value.level?"Downgrade Plan":"Subscribe":"Subscribe"),y=_(()=>{var l;return!s.plan_id||s.plan_id===((l=c.value)==null?void 0:l.id)||b.value}),D=()=>{if(!s.plan_id){alert("Please select a plan before proceeding.");return}let l=m.value.find(t=>t.id===s.plan_id);if(l.level<c.value.level){C.visit(`/plan/retention?plan_id=${s.plan_id}`);return}if(l.is_required_payment&&!i.userHasAnyPaymentMethod){C.get(`/plan/payment?plan_id=${s.plan_id}`);return}b.value=!0,s.post("/plan/subscribe",{preserveScroll:!0,onSuccess:()=>{alert("Subscription successful!"),b.value=!1,a.value.plan_id=s.plan_id},onError:t=>console.error(t)})},B=l=>{l.is_available&&(s.plan_id=l.id)},u=_(()=>i.userPaymentMethods.length>0?{...i.userPaymentMethods[0],...x.value.find(l=>l.slug==i.userPaymentMethods[0].card.display_brand)}:null);return(l,t)=>{const j=V("Head");return d(),r(k,null,[w(j,{title:"Plan"}),w(Y,null,{header:P(()=>t[0]||(t[0]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Plan ",-1)])),default:P(()=>[e("div",F,[e("div",H,[t[8]||(t[8]=e("h2",{class:"text-3xl font-bold text-red-400 mb-6 font-heading text-center"},"Choose Your Plan",-1)),e("div",null,[e("div",L,[(d(!0),r(k,null,N(m.value,n=>(d(),r("div",{key:n.id,class:M(["p-6 bg-white rounded-lg shadow-md flex items-center justify-between border-2 cursor-pointer transition duration-200",U(s).plan_id===n.id?"border-red-400 bg-red-50":"border-gray-200",n.is_available?"":"opacity-50 cursor-not-allowed"]),onClick:oe=>B(n)},[e("div",O,[e("div",T,[e("h3",q,o(n.name),1),e("p",z,o(n.description),1),e("p",W,o(n.price>0?`$${n.price.toFixed(2)} per month`:"Free"),1),a.value.plan_id===n.id&&!a.value.scheduled_downgrade_plan_id?(d(),r("span",G,[t[1]||(t[1]=v(" **Your plan will be renewed on ")),e("strong",null,o(a.value.date_to),1)])):p("",!0),a.value.plan_id===n.id&&a.value.scheduled_downgrade_plan_id?(d(),r("span",J,[t[2]||(t[2]=v(" **Your plan will be expired on ")),e("strong",null,o(a.value.date_to),1),t[3]||(t[3]=v(". You will be downgraded to the ")),e("strong",null,o(a.value.scheduledDowngradePlan.name),1),t[4]||(t[4]=v(" plan. "))])):p("",!0)]),a.value.plan_id===n.id?(d(),r("span",K," Current ")):p("",!0)])],10,E))),128))]),u.value?(d(),r("div",Q)):p("",!0),u.value?(d(),r("div",R,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"Your Default Payment Method",-1)),e("div",X,[u.value.attachment?(d(),r("img",{key:0,src:u.value.attachment.full_url,alt:"Visa Logo",class:"w-12 h-12"},null,8,Z)):p("",!0),e("p",ee,[t[5]||(t[5]=v(" ending in ")),e("span",te,o(u.value.card.last4),1)]),e("p",le,"Exp: "+o(u.value.card.exp_month)+"/"+o(u.value.card.exp_year),1)]),t[7]||(t[7]=e("div",{class:"mt-4 text-center"},[e("a",{href:"/billing",class:"text-blue-600 hover:underline text-md"}," Manage Billing ")],-1))])):p("",!0),e("div",ae,[e("button",{onClick:D,class:M(["text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-200",{"bg-green-400 hover:bg-green-500":g.value==="Subscribe","bg-blue-400 hover:bg-blue-500":g.value.includes("Upgrade"),"bg-yellow-400 hover:bg-yellow-500":g.value.includes("Downgrade"),"bg-gray-400 cursor-not-allowed":y.value}]),disabled:y.value},o(g.value),11,se)])])])])]),_:1})],64)}}},pe=$(ne,[["__scopeId","data-v-a8b5de8d"]]);export{pe as default};
